<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PepperMario!</title>  <!-- Changed title here -->
    
    <!-- 98.css for Windows 98 styling -->
    <link rel="stylesheet" href="https://unpkg.com/98.css">
    
    <!-- xterm.js styles for the terminal -->
    <link rel="stylesheet" href="xterm/css/xterm.css">  <!-- Updated to xterm/css/xterm.css -->
    <!-- jQuery CDN -->
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="xterm/lib/xterm.js"></script>  <!-- Correct path to xterm.js -->
</head>
<body>
    <div class="window" style="width: 600px; height: 450px; margin: 50px auto;">
        <div class="title-bar">
            <span>PepperMario!</span>  <!-- Changed title here as well -->
            <div class="wm-header-buttons" style="float: right;">
                <button onclick="maximizeWindow()">1</button> <!-- Maximize -->
                <button onclick="minimizeWindow()">0</button> <!-- Minimize -->
                <button onclick="closeWindow()">r</button> <!-- Close -->
            </div>
        </div>
        <div class="window-body">
            <div id="terminal"></div>
        </div>
    </div>


    <script>
        $(document).ready(function () {
            const terminalElement = $("#terminal")[0];
            const terminal = new Terminal({
                cursorBlink: true,  // Optional: Makes the cursor blink like a real terminal
                theme: {
                    background: '#008080',  // Set background to teal for Windows 98 theme
                    foreground: '#FFFFFF'  // White text color
                }
            });
            terminal.open(terminalElement);

            // Display Windows version info
            terminal.write("Microsoft Windows [Version 10.0.19045.2486]\r\n");
            terminal.write("(c) Microsoft Corporation. All rights reserved.\r\n");

            // Simulate the CMD-like header after 2 seconds
            setTimeout(function() {
                terminal.write("\r\nC:\\Windows\\System32> ");  // Change directory to C:\Windows\System32
            }, 2000);

            let isMaximized = false;

            // Maximize window (Button 1)
            function maximizeWindow() {
                if (isMaximized) {
                    $(".window").css({
                        width: "600px",
                        height: "450px",
                        position: "absolute",
                        top: "50%",
                        left: "50%",
                        transform: "translate(-50%, -50%)"
                    });
                    isMaximized = false;
                } else {
                    $(".window").css({
                        width: "90%",
                        height: "90%",
                        position: "fixed",
                        top: "5%",
                        left: "5%",
                        transform: "none"
                    });
                    isMaximized = true;
                }
            }

            // Minimize window (Button 0)
            function minimizeWindow() {
                $(".window").hide();
            }

            // Close window
            function closeWindow() {
                $(".window").remove();
            }

            // Disable right-click globally
            $(document).on("contextmenu", function (event) {
                event.preventDefault();
                alert("Right-click is disabled on this website.");
            });

            // Handle user input
            terminal.onKey(function (e) {
                const char = e.key;  // Capture the key pressed

                if (char === 'Enter') {
                    const input = terminal.buffer.active.getLine(terminal.buffer.active.cursorY).translateToString();
                    
                    // Check if the input is empty or not
                    if (input.trim() === '') {
                        terminal.write('\r\nC:\\Windows\\System32> ');  // Simply show prompt on empty input
                    } else {
                        // Display the error message for any command entered
                        terminal.write(`\r\n'${input}' is not recognized as an internal or external command,\r\noperable program or batch file.\r\n`);
                        terminal.write('\r\nC:\\Windows\\System32> ');  // Show prompt again after error message
                    }
                } else {
                    terminal.write(char);  // Print the character pressed by the user
                }
            });
        });
    </script>
</body>
</html>
